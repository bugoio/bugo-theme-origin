{{/**
   * Blocks
   *
   * Adds blocks of content to a landing page
   * 
   * @version 1.0.0
   */}}


{{/* loop through the landing page's contend blocks and include the appropriate partial */}}
{{ $context := . }}
<div class="blocks">
  {{ range $index, $block := .Params.blocks }}
    {{ $path := printf "blocks/%s" .template }}
    {{ $options := dict "context" $context "image" .background_image "transform" "w_1600"}}
    {{ $imgURL := partial "utilities/cloudinary-transform" $options }}
    <div 
      id="{{ $block.title | anchorize }}-block" 
      class="block {{ .template }}
      {{ if ne .show_block_title true }}no-title{{ end }}
      {{ if .no_container }}no-container{{ end }}
      {{ if .no_container }}no-padding{{ end }}
      {{ with .text_alignment  }}text-{{ . | urlize }}{{ end }}
      {{ with .color_scheme }}{{ . | urlize }}{{ end }}
      " {{ if $block.background_image }} style="background-image: url({{ $imgURL }});" {{ end }}
      aria-label="{{ $block.title }}"
      role="region"
      tabindex="0"
    >
      {{ partial $path (dict "context" $context "block" . ) }}
    </div>
  {{ end }}
</div>
